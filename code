//in serial monitor we type forward ,the dc motor act as a wheel in a car ,it needs yo move forward
//if any object is dectected on 100cm it needs to sound buzzer
//if we typ backward the motor goes to backward,object detected buzzer need
//if we typ stop the motor
#include<LiquidCrystal_I2C.h>
LiquidCrystal_I2C lcd(0x27,16,2);

#define trig 12
#define echo 13

float time,distance;

String input="";
void setup()
{
  Serial.begin(9600);
  
  
  pinMode(5,OUTPUT);//buzzer
  pinMode(9,OUTPUT);//input 1
  pinMode(8,OUTPUT);//input 2
  pinMode(11,OUTPUT);//en pin
  pinMode(7,OUTPUT);//motor 2 input 1
  pinMode(6,OUTPUT);// motor 2 input 2
  pinMode(10,OUTPUT);//en pin
  pinMode(echo,INPUT);
  pinMode(trig,OUTPUT);
  lcd.init();
  lcd.backlight();
  Serial.println("Enter 'forward' to move forward,'backward' to backward,'stop' to stop");
}
void loop()
{ 
  digitalWrite(trig,LOW);
  delayMicroseconds(2);
  
  digitalWrite(trig,HIGH);
  delayMicroseconds(10);
  
  digitalWrite(trig,LOW);

  
  time=pulseIn(echo,HIGH);
  distance=(time*0.034)/2;
 
  //Serial.println(" cm distance");
  //Serial.print(distance);
  
  
  if (Serial.available())
  {
    input = Serial.readStringUntil('\n');
    input.trim();
  }
    if(input=="forward")
    {
      lcd.clear();
      lcd.setCursor(0,0);
      lcd.print("moving forward");
      digitalWrite(9,LOW);
      digitalWrite(8,HIGH);
      analogWrite(11,200);
      
      digitalWrite(7,LOW);
      digitalWrite(6,HIGH);
      analogWrite(10,200);
      
    
      if(distance<100)
      {
        
        digitalWrite(5,HIGH);//buzzer
    
        digitalWrite(9,LOW);
        digitalWrite(8,LOW);
        analogWrite(11,0);
        
        digitalWrite(7,LOW);
        digitalWrite(6,LOW);
        analogWrite(10,0);
          lcd.clear();
          lcd.setCursor(0,0);
          lcd.print("OBSTACLE HERE!!");
        
      }
      else if(distance>=100)
      {
       
        digitalWrite(5,LOW);

      }
    }
    else if(input=="backward")
    {
      digitalWrite(9,HIGH);
      digitalWrite(8,LOW);
      analogWrite(11,200);
      
      digitalWrite(7,HIGH);
      digitalWrite(6,LOW);
      analogWrite(10,200);
      lcd.clear();
      lcd.setCursor(0,0);
      lcd.print("moving backward");
    
      if(distance<100)
      {
        digitalWrite(5,HIGH);
        
        digitalWrite(9,LOW);
        digitalWrite(8,LOW);
        analogWrite(11,0);
        digitalWrite(7,LOW);
        digitalWrite(6,LOW);
        analogWrite(10,0);
          lcd.clear();
          lcd.setCursor(0,0);
          lcd.print("OBSTACLE HERE!!");
      }
      else if (distance>=100)
      {
        digitalWrite(5,LOW);
   
      }
    }
     else if(input=="stop")
      {
        digitalWrite(9,LOW);
        digitalWrite(8,LOW);
        analogWrite(11,0);
       digitalWrite(7,LOW);
        digitalWrite(6,LOW);
        analogWrite(10,0);
       
        digitalWrite(5,LOW);

       lcd.clear();
      lcd.setCursor(0,0);
      lcd.print("moving stopped");
      }
  
  
  
   
  
}




